<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이용 안내</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/instruction.css" rel="stylesheet">
</head>
<body>
    <%- include('../nav_and_banner.ejs', {page: 'notice', nickname: data.nickname, notice:'2025.08.01 신규 캐릭터 [물]라플라스 추가 완료'}) %> 
    
    <%- include('./info_tab.ejs', {from: 'notice'}) %> 
    
    <% if(data.isit_admin){ %>
    <a href="/info/notice/write" class="admin-noticewrite btn-cut btn-blue color-white">글 작성</a>
    <% } %>
    <div class="instruction-contents">

        <ul class="notice-container  shadow-basic">
            <li class="top"></li>
            <% for(let i=0; i<data.pinned_notice.length; i++){ %>
            <li class="important">
                <a href="/info/notice/detail/<%= data.pinned_notice[i].id %>" class="instruction-post">
                    <span ><i class="fa-solid fa-thumbtack"></i></span>
                    <span class="flex-fill" ><%= data.pinned_notice[i].subject %></span>
                    <span>
                        <%=data.pinned_notice[i].upload_datetime.getFullYear()+"-"+("0"+(data.pinned_notice[i].upload_datetime.getMonth()+1)).slice(-2) + "-" + ("0"+(data.pinned_notice[i].upload_datetime.getDate())).slice(-2) %>
                    </span> 
                </a>
            </li>
            <% } %>

            <!-- <li class="important">
                <a class="instruction-post">
                    <span ><i class="fa-solid fa-thumbtack"></i></span>
                    <span class="flex-fill" >[이용방법] 로드의 전술서 이용 방법</span>
                    <span>2025-11-12</span> 
                </a>
            </li> -->

            <% for(let i=data.unpinned_notice.length - 1; i >= 0; i--){ %>
            <li class="">
                <a href="/info/notice/detail/<%= data.unpinned_notice[i].id %>" class="instruction-post">
                    <span ><%= i + 1  %></span>
                    <span class="flex-fill" ><%= data.unpinned_notice[i].subject %></span>
                    <span>
                        <%=data.unpinned_notice[i].upload_datetime.getFullYear()+"-"+("0"+(data.unpinned_notice[i].upload_datetime.getMonth()+1)).slice(-2) + "-" + ("0"+(data.unpinned_notice[i].upload_datetime.getDate())).slice(-2) %>
                    </span> 
                </a>
            </li>
            <% } %>

            <!-- <li class="">
                <a class="instruction-post">
                    <span >7</span>
                    <span class="flex-fill" >[게임 업데이트] 2026.01.02 게임 업데이트 신캐릭터 어둠 자이라 추가</span>
                    <span>2025-11-12</span> 
                </a>
            </li> -->

            
        </ul>
    </div>


    <div class="pagenation  d-flex w-100 justify-content-center">
        <div class="jumps">
            <a href="javascript:moveToPageNum(<%= Math.floor((data.page - 5) / 5 - ((data.page - 5) % 5 == 0)) * 5 + 1%>)"><i class="fa-solid fa-angles-left"></i>  </a>
            <a href="javascript:moveToPageNum(<%=data.page - 1%>)"><i class="fa-solid fa-angle-left"></i>  </a>
        </div>
        <div>
            <a href="javascript:moveToPageNum(<%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 1%>)" <% if(data.page % 5 == 1) {%> class="active" <%}%> ><%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 1%></a>
            <% if(Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 2  <= data.max_page) {%>
            <a href="javascript:moveToPageNum(<%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 2%>)" <% if(data.page % 5 == 2) {%> class="active" <%}%> ><%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 2 %></a>
            <%} %>
            <% if(Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 3  <= data.max_page) {%>
            <a href="javascript:moveToPageNum(<%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 3%>)" <% if(data.page % 5 == 3) {%> class="active" <%}%> ><%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 3 %></a>
            <%} %>
            <% if(Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 4  <= data.max_page) {%>
            <a href="javascript:moveToPageNum(<%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 4%>)" <% if(data.page % 5 == 4) {%> class="active" <%}%> ><%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 4 %></a>
            <%} %>
            <% if(Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 5  <= data.max_page) {%>
            <a href="javascript:moveToPageNum(<%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 5%>)" <% if(data.page % 5 == 0) {%> class="active" <%}%> ><%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 5 %></a>
            <%} %>
        </div>
        <div class="jumps">
            <a href="javascript:moveToPageNum(<%=data.page + 1%>)"><i class="fa-solid fa-angle-right"></i>  </a>
            <a href="javascript:moveToPageNum(<%= Math.floor(data.page / 5 - (data.page % 5 == 0)) * 5 + 6%>)"><i class="fa-solid fa-angles-right"></i>  </a>
        </div>
    </div>
        

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    
    <script>
        function moveToPageNum(num){
            // console.log($(page).text())
            url = new URL(window.location.href);
            url.searchParams.set("p", num);
            window.location.href = url.toString();
        }

    </script>
    


</body>
</html>